function a15_0x33fa(){const _0x548473=['4225686qmbDnL','2427655GSOHDt','982278FpUwmg','(((.+)+)+)+$','Erreur\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20\x27warn_users\x27:','warn_count','3116442gMVwkQ','10461200YaJDGi','config','postgres://db_7xp9_user:6hwmTN7rGPNsjlBEHyX49CXwrG7cDeYi@dpg-cj7ldu5jeehc73b2p7g0-a.oregon-postgres.render.com/db_7xp9','La\x20table\x20\x27warn_users\x27\x20a\x20été\x20créée\x20avec\x20succès.','\x20a\x20été\x20réinitialisé\x20à\x200.','log','Le\x20warn_count\x20de\x20l\x27utilisateur\x20','release','exports','Erreur\x20lors\x20de\x20la\x20réinitialisation\x20du\x20warn_count\x20:','rows','error','length','connect','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20warn_count\x20:','4mhgEjA','query','Utilisateur\x20','3796244yfQRmd','DATABASE_URL','168260IiNumd','SELECT\x20warn_count\x20FROM\x20warn_users\x20WHERE\x20jid\x20=\x20$1'];a15_0x33fa=function(){return _0x548473;};return a15_0x33fa();}const a15_0x5b0922=a15_0x536c;(function(_0x125635,_0x561edb){const _0x5ccc96=a15_0x536c,_0x49393e=_0x125635();while(!![]){try{const _0x262d11=parseInt(_0x5ccc96(0xd2))/0x1*(-parseInt(_0x5ccc96(0xd7))/0x2)+-parseInt(_0x5ccc96(0xdb))/0x3+parseInt(_0x5ccc96(0xd5))/0x4+parseInt(_0x5ccc96(0xda))/0x5+parseInt(_0x5ccc96(0xd9))/0x6+parseInt(_0x5ccc96(0xdf))/0x7+-parseInt(_0x5ccc96(0xe0))/0x8;if(_0x262d11===_0x561edb)break;else _0x49393e['push'](_0x49393e['shift']());}catch(_0x1c8803){_0x49393e['push'](_0x49393e['shift']());}}}(a15_0x33fa,0x95883),require('dotenv')[a15_0x5b0922(0xe1)]());const {Pool}=require('pg'),s=require('../set');var dbUrl=s[a15_0x5b0922(0xd6)]?s[a15_0x5b0922(0xd6)]:a15_0x5b0922(0xe2);const proConfig={'connectionString':dbUrl,'ssl':{'rejectUnauthorized':![]}},pool=new Pool(proConfig);async function creerTableWarnUsers(){const _0x169096=a15_0x5b0922,_0x310615=(function(){let _0x294f6f=!![];return function(_0x1ecee5,_0x1b9aa3){const _0x42e06=_0x294f6f?function(){if(_0x1b9aa3){const _0x25e81b=_0x1b9aa3['apply'](_0x1ecee5,arguments);return _0x1b9aa3=null,_0x25e81b;}}:function(){};return _0x294f6f=![],_0x42e06;};}()),_0x4626e9=_0x310615(this,function(){const _0x4a5574=a15_0x536c;return _0x4626e9['toString']()['search'](_0x4a5574(0xdc))['toString']()['constructor'](_0x4626e9)['search']('(((.+)+)+)+$');});_0x4626e9();const _0x4e2a9a=await pool[_0x169096(0xd0)]();try{const _0xb42670='\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20warn_users\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jid\x20text\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20warn_count\x20integer\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20';await _0x4e2a9a['query'](_0xb42670),console[_0x169096(0xe5)](_0x169096(0xe3));}catch(_0x42c482){console[_0x169096(0xeb)](_0x169096(0xdd),_0x42c482);}finally{_0x4e2a9a[_0x169096(0xe7)]();}};creerTableWarnUsers();function a15_0x536c(_0x3f2a43,_0x3138a0){const _0xd0cfb5=a15_0x33fa();return a15_0x536c=function(_0x236df2,_0x531b4b){_0x236df2=_0x236df2-0xcf;let _0x33faf2=_0xd0cfb5[_0x236df2];return _0x33faf2;},a15_0x536c(_0x3f2a43,_0x3138a0);}async function ajouterUtilisateurAvecWarnCount(_0x55ef5a){const _0x352834=a15_0x5b0922,_0x203758=await pool[_0x352834(0xd0)]();try{const _0x36303a='\x0a\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20warn_users\x20(jid,\x20warn_count)\x0a\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20($1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT\x20(jid)\x0a\x20\x20\x20\x20\x20\x20\x20\x20DO\x20UPDATE\x20SET\x20warn_count\x20=\x20warn_users.warn_count\x20+\x201;\x0a\x20\x20\x20\x20\x20\x20',_0xab9b30=[_0x55ef5a];await _0x203758[_0x352834(0xd3)](_0x36303a,_0xab9b30),console[_0x352834(0xe5)](_0x352834(0xd4)+_0x55ef5a+'\x20ajouté\x20ou\x20mis\x20à\x20jour\x20avec\x20un\x20warn_count\x20de\x201.');}catch(_0x34dc6c){console['error']('Erreur\x20lors\x20de\x20l\x27ajout\x20ou\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27utilisateur\x20:',_0x34dc6c);}finally{_0x203758[_0x352834(0xe7)]();}};async function getWarnCountByJID(_0x5dac66){const _0x4510cc=a15_0x5b0922,_0x246866=await pool[_0x4510cc(0xd0)]();try{const _0x7356d7=_0x4510cc(0xd8),_0x38fc19=[_0x5dac66],_0x596e4d=await _0x246866[_0x4510cc(0xd3)](_0x7356d7,_0x38fc19);if(_0x596e4d[_0x4510cc(0xea)][_0x4510cc(0xcf)]>0x0){const _0x326fa4=_0x596e4d[_0x4510cc(0xea)][0x0][_0x4510cc(0xde)];return _0x326fa4;}else return 0x0;}catch(_0x90eef8){return console[_0x4510cc(0xeb)](_0x4510cc(0xd1),_0x90eef8),-0x1;}finally{_0x246866[_0x4510cc(0xe7)]();}};async function resetWarnCountByJID(_0x29a39c){const _0x228948=a15_0x5b0922,_0x31bc5d=await pool['connect']();try{const _0x311024='UPDATE\x20warn_users\x20SET\x20warn_count\x20=\x200\x20WHERE\x20jid\x20=\x20$1',_0x4834df=[_0x29a39c];await _0x31bc5d['query'](_0x311024,_0x4834df),console['log'](_0x228948(0xe6)+_0x29a39c+_0x228948(0xe4));}catch(_0x58230b){console[_0x228948(0xeb)](_0x228948(0xe9),_0x58230b);}finally{_0x31bc5d['release']();}}module[a15_0x5b0922(0xe8)]={'ajouterUtilisateurAvecWarnCount':ajouterUtilisateurAvecWarnCount,'getWarnCountByJID':getWarnCountByJID,'resetWarnCountByJID':resetWarnCountByJID};
